<div class="row mb-3">
  <div class="col-lg-6 col-sm-12 mb-sm-3 mb-lg-0">
    <div class="btn-group dropright">
      <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" id="tfc_drop_dis">
        Select Config
      </button>
      <div class="dropdown-menu" id="tfc_drop">
        <a class="dropdown-item" data-toggle="modal" data-target="#newtfcmodal">Generate New</a>
        <div class="dropdown-divider"></div>
      </div>
    </div>
  </div>
</div>

<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">id</th>
      <th scope="col">Mode</th>
      <th scope="col">type</th>
      <th scope="col">displayName</th>
      <th scope="col">disp</th>
    </tr>
  </thead>
  <tbody id="tfctable">
    <th scope="row">Select year first</th>
  </tbody>
</table>


<!-- New teamform config modal -->
<div class="modal fade" id="newtfcmodal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">New Teamform Config</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success" id="tfc_gene_btn">Generate</button>
      </div>
    </div>
  </div>
</div>

<script>
  function genetfctable(k, v) {
    var tr = "<tr>";
    tr += "<th scope='row'>";
    tr += k;
    tr += "</th><td>";
    tr += v.mode;
    tr += "</td><td>";
    tr += v.type;
    tr += "</td><td>";
    tr += v.displayName;
    tr += "</td><td>";
    if (v.type == 'boolean') {
      tr += '<div class="btn-group btn-group-toggle" data-toggle="buttons"><label class="btn btn-outline-success">';
      tr += '<input type="radio" autocomplete="off">';
      tr += v.displayT;
      tr += '</label><label class="btn btn-outline-warning">';
      tr += '<input type="radio" autocomplete="off">';
      tr += v.displayF;
      tr += '</label></div>';
    } else if (v.type == 'int') {
      tr += '<input type="number" class="form-control numInput" value="0" min="0" disabled>';
    } else if (v.type == 'textarea') {
      tr += '<textarea class="form-control" rows="' + v.row + '"></textarea>';
    }
    tr += "</td>";
    tr += "</tr>";
    return tr;
  }
</script>


<script src="js/teamform_config.js"></script>
<script>
  firebase.database().ref('events').on('value', function(snapshot) {
    var events = snapshot.val();
    for (var k in events) {
      $("#tfc_drop").append('<a class="dropdown-item tfcdropdown" selectEvent="' + k + '">' + k + '</a>');
    }

    //load click event after dropdown load.
    $('.tfcdropdown').click(function() {
      $("#tfctable").html("");
      var eventId = $(this).attr('selectEvent');

      $("#tfc_drop_dis").text(eventId);
      getTeamformWithEventId(eventId, function(data) {
        for (var k in data.fields) {
          var f = data.fields[k];
          $("#tfctable").append(genetfctable(k, f));
        }
        reloadNumberBtn();
      });
    });
  });
</script>

<script src="js/lib/bootstrap-number-input.js"></script>

<script>
  $('#tfc_gene_btn').click(function() {

  });
</script>
